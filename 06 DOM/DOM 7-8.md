# DOM 7-8

- js无法操作dom
- 浏览器在window上加了一个document
- js用document操作网页
- API
- document.querySelector('#id')
- document.querySelectorAll('.red')[0]
- 兼容IE用 getElement(s)ByXXX
- 获取特定元素
- document.documentElement——html
- document.head——head
- document.body——body
- window——窗口（窗口不是元素）监听
- document.all——所有元素，第六个falsy值
- 获取的元素是对象，元素 有6层原型链
- x.nodeType **记住13**
- **1 元素 Element，标签  Tag**
- **3 文本 Text**
- 8 注释 Comment
- 9 文档  Document
- 11  文档片段 DocumentFragment
- 增删改查
- 增
- document.createElement('div|style|script|li')——标签节点
- document.createTextNode('text') ——文本节点
- div.appendChild(text,node接口) ——标签插入文本` element接口  div.innerText='text' div.textContent='text'`
- 1个元素不能出现在两个地方，除非复制一份 div.cloneNode()
- 删
- parentNode.removeChild(childNode) ——旧
- childNode.remove()——新
- 改属性
- div.className= "newdiv"——改class
- div.classList.add('newdiv')——改class
- div.style=' color:blue;'——改style
- div.style.width = '100px'——改style
- diy.style.backgroundColor = 'white' 大小写
- div.dataset.x = 'xx' 改data-* 属性
- 读属性
- div.classList / a.href
- div.getAttribute('class') /a.getAttribute('href')
- 改事件处理
- div.onclick(默认null)——升级版——div.addEventListener
- div.onclik调用方式 fn.call(div,event)
- 改内容
- div.innerText = 'xxx' ——文本内容
- div.textContent = 'xxx'
- div.innerHTML = 'xxx' ——html内容
- div.innerHTML = '' ——改标签，先清空
- div.appendChild(div) ——再加内容
- 查
- node.parentNode | node.parentElement——查父元素
- node.parentNode.parentNode——查祖元素
- node.childNodes | node.children——查子元素
- node.parentNode.childNodes | node.parentNode.children——查兄弟元素
- node.firstChild
- node.lastChild
- node.previousSibling
- node.nextSibling
- 遍历 
- DOM操作跨线程
- 跨线程通信
- 自动同步  id  dataset：{x:test}
- js——property——属性，div1的虽有属性，支持字符串，布尔等类型
- 渲染引擎——attribute——属性，渲染引擎div对应标签的属性 ，只支持字符串
- **封装**
- 库——提供给其它人的工具代码 jQuery
- API——库暴露出来的函数或属性
- 框架——当库变得很大，需要学习才能看懂，Vue React
- 对象风格，也叫命名空间风格，比如window.dom
- **原生js封装DOM库**
- **jQuery风格（链式风格）**重新封装
- 闭包 & 链式操作 （闭包访问外部变量，api操作elements）
- 返回api对象  return api
- 是一个不需要加new的构造函数
- jQuery对象代指jQuery函数构造出来的对象
- const div2 = $('.div')  <u>命名风格</u>  $div2——jQuery对象
- DOM    对象只能使用  DOM API querySelector  appendChild 
- jQuery 对象只能使用  jQuery的API find each 
- `jQuery.__proto__===jQuery.prototype` 共用属性|函数
- `const api = Object.create(jQuery.prototype)`  。创建一个对象，这个对象的`__proto__`是括号里的东西,`const api = {__proto__:}`。
- jQuery.fn =  jQuery.prototype = {}  别名  $ = jQuery
- 设计模式——漂亮且通用的代码
- 不用new的构造函数
- **重载**  $(支持多种参数)
- 用闭包隐藏细节
- **getter**/**setter**  $.div.text()可读也可写
- **别名** $.fn 是$.prototype 的
- **适配器**，针对不同浏览器使用不同代码
- 学习设计模式——总结，重写，写得好的地方抽象出来

